<div class="player-card">
  {% assign player_name = include.player.name %}
  {% if player_name == nil or player_name == "" %}
    {% assign name_parts = include.extra.id | split: "_" %}
    {% capture player_name %}
      {% for part in name_parts %}{{ part | capitalize }} {% endfor %}
    {% endcapture %}
    {% assign player_name = player_name | strip %}
  {% endif %}
  <div class="player-card-header">
    {% if include.player.photo %}
    <img src="{{ include.player.photo }}" alt="{{ player_name }}" class="player-photo">
    {% endif %}
    <div class="player-main-info">
      <div class="player-info-content">
        <div class="player-primary-details">
          <h2>{{ player_name }}</h2>
          <ul class="player-general-data">
            {% for info in include.player.general %}
            {% if info[0] != "Team" %}
            <li><strong>{{ info[0] }}:</strong> {{ info[1] }}</li>
            {% endif %}
            {% endfor %}
          </ul>
          {% if include.extra.social_media %}
          <div class="player-social">
            {% if include.extra.social_media.twitter %}
            <a href="https://twitter.com/{{ include.extra.social_media.twitter }}" target="_blank" title="Twitter"><img src="https://simpleicons.org/icons/x.svg" alt="Twitter" class="social-icon"></a>
            {% endif %}
            {% if include.extra.social_media.bluesky %}
            <a href="https://bsky.app/profile/{{ include.extra.social_media.bluesky }}" target="_blank" title="Bluesky"><img src="https://simpleicons.org/icons/bluesky.svg" alt="Bluesky" class="social-icon"></a>
            {% endif %}
            {% if include.extra.social_media.twitch %}
            <a href="https://twitch.tv/{{ include.extra.social_media.twitch }}" target="_blank" title="Twitch"><img src="https://simpleicons.org/icons/twitch.svg" alt="Twitch" class="social-icon"></a>
            {% endif %}
            {% if include.extra.social_media.youtube %}
            <a href="https://youtube.com/@{{ include.extra.social_media.youtube }}" target="_blank" title="YouTube"><img src="https://simpleicons.org/icons/youtube.svg" alt="YouTube" class="social-icon"></a>
            {% endif %}
            {% if include.extra.social_media.instagram %}
            <a href="https://instagram.com/{{ include.extra.social_media.instagram }}" target="_blank" title="Instagram"><img src="https://simpleicons.org/icons/instagram.svg" alt="Instagram" class="social-icon"></a>
            {% endif %}
          </div>
          {% endif %}
        </div>
        {% if include.extra.bio %}
        <div class="player-bio-container">
          <p class="player-bio">{{ include.extra.bio }}</p>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="player-stats">
    {% assign ul = include.player.sources["Unity League"] %}
    {% assign mtg_elo = include.player.sources["MTG Elo Project"] %}

    {% if ul or mtg_elo %}
    <div class="stat-section">
      <h3>Ranks & Ratings</h3>
      <div class="stat-grid">
        {% if ul %}
        <a href="{{ ul.url }}" target="_blank" class="stat-item linked-stat">
          <span class="stat-label">Unity League Rank DE</span>
          <span class="stat-value">{{ ul.data["Rank Germany"] }}</span>
        </a>
        <a href="{{ ul.url }}" target="_blank" class="stat-item linked-stat">
          <span class="stat-label">Unity League Rank EU</span>
          <span class="stat-value">{{ ul.data["Rank Europe"] }}</span>
        </a>
        <a href="{{ ul.url }}" target="_blank" class="stat-item linked-stat">
          <span class="stat-label">Unity League Points</span>
          <span class="stat-value">{{ ul.data["Rank Points"] }}</span>
        </a>
        {% endif %}

        {% if mtg_elo %}
        <a href="{{ mtg_elo.url }}" target="_blank" class="stat-item linked-stat">
          <span class="stat-label">MTG Elo Rating</span>
          <span class="stat-value">{{ mtg_elo.data.current_rating }}</span>
        </a>
        {% endif %}
      </div>
    </div>
    {% endif %}

    {% assign melee = include.player.sources["Melee"] %}
    {% assign topdeck = include.player.sources["Topdeck"] %}

    {% if mtg_elo.data.record or melee.data.record or topdeck.data.Record or topdeck.data["Win Rate"] %}
    <div class="tournament-record">
      <h3>Tournament Record</h3>
      <div class="record-grid">
        {% if mtg_elo.data.record %}
        <a href="{{ mtg_elo.url }}" target="_blank" class="record-item linked-record">
          <span class="record-label">MTG Elo Record</span>
          {{ mtg_elo.data.record }}
        </a>
        {% endif %}

        {% if melee.data.record %}
        <a href="{{ melee.url }}" target="_blank" class="record-item linked-record">
          <span class="record-label">Melee Record</span>
          {{ melee.data.record }}
        </a>
        {% endif %}

        {% if topdeck.data.Record %}
        <a href="{{ topdeck.url }}" target="_blank" class="record-item linked-record">
          <span class="record-label">Topdeck Record</span>
          {{ topdeck.data.Record }}
        </a>
        {% endif %}

        {% if topdeck.data["Win Rate"] %}
        <a href="{{ topdeck.url }}" target="_blank" class="record-item linked-record">
          <span class="record-label">Topdeck Winrate</span>
          {{ topdeck.data["Win Rate"] }}
        </a>
        {% endif %}
      </div>
    </div>
    {% endif %}
  </div>
</div>
